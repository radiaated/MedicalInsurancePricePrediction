{% extends 'generic/base_generic.html' %} {% block title %} Submit |
IntelliGuard Insurance {% endblock %} {% block content %}

<div class="card">
  <div id="msg"></div>
  <h3>Fill up</h3>
  <form method="POST" class="slform">
    {% csrf_token %}
    {% for field in form %}
      <label for="{{ field.id_for_label }}">
        {{ field.label }}
        {% if field.field.required %}
          <span class="font-extrabold text-red-700">*</span>
        {% endif %}
        {% if field.field.help_text %}
          <span class="italic text-gray-600">{{ field.field.help_text }}</span>
        {% endif %}
      </label>
      {{ field }}
      {% if field.errors %}
        <div class="text-sm text-red-600 italic">
          {% for error in field.errors %}
            <p>{{ error }}</p>
          {% endfor %}
        </div>
      {% endif %}
    {% endfor %}
    <input type="submit" name="submit" value="Submit" />
  </form>
</div>

<script>
  function classAdder(divel, classnames) {
    for (var classname of classnames.split(" ")) {
      divel.classList.add(classname);
    }
  }
  function classRemover(divel, classnames) {
    for (var classname of classnames.split(" ")) {
      divel.classList.remove(classname);
    }
  }

  function validateForm(e) {
    console.log("hello");

    var age = applyform.age.value;
    var bmi = applyform.bmi.value;
    var children = applyform.children.value;

    var msg = document.getElementById("msg");

    var classnames = "text-sm bg-red-50 border border-red-400 p-2 mb-2";

    msg.innerHTML = "";

    if (age < 18 || age > 64) {
      msg.innerHTML = "Age must be between 18 to 64";
      classAdder(msg, classnames);
      return false;
    }

    if (bmi < 9 || bmi > 45) {
      msg.innerHTML = "Invalid BMI value";
      classAdder(msg, classnames);
      return false;
    }

    if (children === "" || children < 0 || children > 5) {
      msg.innerHTML = "Invalid children number";
      classAdder(msg, classnames);
      return false;
    }

    classRemover(msg, classnames);

    return true;
  }
</script>

{% endblock %}
